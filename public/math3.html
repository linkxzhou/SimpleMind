<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>思维导图卡片视图</title>
    <style>
        :root {
            --indent-width: 40px;
            --connector-color: #e8e8e8;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 10px;
            color: #333;
        }

        h2 {
            text-align: center;
            margin-bottom: 10px;
            color: #1f2d3d;
        }

        #app {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* 节点包装器 */
        .node-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 10px;
        }

        /* 子节点缩进容器 */
        .children-wrapper {
            padding-left: var(--indent-width);
            border-left: 2px solid var(--connector-color);
            margin-left: 10px; /* 让线条对齐父节点的大致中心或左侧 */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* 卡片样式 */
        .card {
            background-color: #fff;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            color: #fff; /* 默认文字颜色为白色，适应深色背景 */
            min-width: 200px;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .card-text {
            font-size: 1.25rem;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .card-note {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.95;
            white-space: pre-wrap; /* 保留换行符 */
        }

        /* 响应式调整 */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .children-wrapper {
                padding-left: 10px;
                margin-left: 5px;
            }
        }
    </style>
</head>
<body>

    <h2 id="topic-title">思维导图Card</h2>
    <div id="app"></div>

    <script>
        // 模拟思维导图数据
        const cardData = 
        // {{REPLACE:cardData BEGIN}}
{
  "data": {
    "text": "二年级数学上册总结",
    "expand": true,
    "uid": "f370b2a7-2492-4100-9512-c2b3a47039b9",
    "isActive": false
  },
  "children": [
    {
      "data": {
        "text": "长度单位",
        "note": "学习厘米和米两个基本长度单位，掌握1米=100厘米的换算关系。能够正确使用尺子测量物体长度，认识线段的特征，学会画指定长度的线段。培养学生的测量意识和空间观念，能够估计和比较物体的长短。",
        "nextSystemPrompt": "基于长度单位知识点，总结出厘米认识、米的认识、线段认识、长度测量、单位换算等子知识点",
        "color": "#2E8B57",
        "expand": true,
        "richText": false,
        "isActive": false,
        "uid": "0c12c505-4e4a-4f56-b635-5d901952a17c",
        "dir": "right"
      },
      "children": [
        {
          "data": {
            "text": "厘米的认识",
            "note": "认识厘米(cm)作为测量较短物体的单位，通过观察尺子了解1厘米的实际长度，能够用手指比画1厘米。掌握用尺子测量物体长度的方法：将尺子的0刻度对准物体一端，看另一端对应的刻度数。",
            "nextSystemPrompt": "",
            "color": "#228B22",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "d17f38ae-f062-41af-824e-35de010e0ab1"
          },
          "children": []
        },
        {
          "data": {
            "text": "米的认识",
            "note": "认识米(m)作为测量较长物体的单位，通过米尺直观感受1米的长度。理解米与厘米的关系：1米=100厘米。能够根据实际情况选择合适的长度单位进行测量和表达。",
            "nextSystemPrompt": "",
            "color": "#32CD32",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "5d926227-46cb-45e1-9699-ee8b04210069"
          },
          "children": []
        },
        {
          "data": {
            "text": "线段的认识",
            "note": "认识线段的特征：直的、有两个端点、可以测量长度。能够从生活中的物体边缘抽象出线段概念，学会用尺子画指定长度的线段，掌握连接两点画线段的方法。",
            "nextSystemPrompt": "",
            "color": "#3CB371",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "f561a7d9-a0a5-46a4-8557-11167ac67c24"
          },
          "children": []
        },
        {
          "data": {
            "text": "长度测量",
            "note": "掌握正确的测量方法和步骤，能够选择合适的测量工具。学会估计物体长度，培养测量意识。了解不同的测量工具：直尺、米尺、软尺、卷尺等的使用场合。",
            "nextSystemPrompt": "",
            "color": "#20B2AA",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "36436ec8-0856-41e4-a7c8-209221ee7c32"
          },
          "children": []
        },
        {
          "data": {
            "text": "单位选择与换算",
            "note": "能够根据物体的实际大小选择合适的长度单位，避免出现明显不合理的表达。掌握米和厘米之间的换算关系，能够进行简单的单位换算。培养数感和量感。",
            "nextSystemPrompt": "",
            "color": "#4682B4",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "cb596b91-fcc4-4c55-8b6e-c160c567e347"
          },
          "children": []
        }
      ]
    },
    {
      "data": {
        "text": "100以内的加法和减法(二)",
        "note": "学习两位数加减法的笔算方法，掌握进位加法和退位减法的计算规则。理解相同数位对齐的重要性，能够正确进行连加、连减和加减混合运算。培养学生的计算能力和解决实际问题的能力。",
        "nextSystemPrompt": "基于100以内加减法知识点，总结出不进位加法、进位加法、不退位减法、退位减法、混合运算等子知识点",
        "color": "#B22222",
        "expand": true,
        "richText": false,
        "isActive": false,
        "uid": "03c22be9-2d1f-4ffa-b47d-e82f912f27c5",
        "dir": "right"
      },
      "children": [
        {
          "data": {
            "text": "不进位加法",
            "note": "学习两位数加法中个位相加不满10的情况，掌握竖式计算的基本格式：相同数位对齐，从个位加起。能够正确计算如35+32这样的不进位加法算式。",
            "nextSystemPrompt": "",
            "color": "#DC143C",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "5f449082-45d6-48c2-8bfa-5fd0b8196352"
          },
          "children": []
        },
        {
          "data": {
            "text": "进位加法",
            "note": "掌握个位相加满10需要向十位进1的计算方法。理解进位的含义和书写格式，能够正确计算如35+37这样的进位加法。注意进位标记的正确书写位置。",
            "nextSystemPrompt": "",
            "color": "#CD5C5C",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "d253d8b3-66e9-4a7a-a9a3-f99549203194"
          },
          "children": []
        },
        {
          "data": {
            "text": "不退位减法",
            "note": "学习两位数减法中个位够减的情况，掌握从个位减起的计算顺序。能够正确计算如48-36这样的不退位减法算式，理解竖式减法的基本规则。",
            "nextSystemPrompt": "",
            "color": "#F08080",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "dbdeb240-f2fc-4eda-ba66-c7d731215385"
          },
          "children": []
        },
        {
          "data": {
            "text": "退位减法",
            "note": "掌握个位不够减时从十位退1当10的计算方法。理解退位的过程：十位减1，个位加10再减。能够正确计算如36-19这样的退位减法算式。",
            "nextSystemPrompt": "",
            "color": "#FA8072",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "4484314b-38aa-4103-931d-9138a4817d74"
          },
          "children": []
        },
        {
          "data": {
            "text": "连加连减和加减混合",
            "note": "掌握连加、连减和加减混合运算的计算顺序：从左到右依次计算。学会用简便方法进行计算，如先算括号内的运算。能够解决实际生活中的多步计算问题。",
            "nextSystemPrompt": "",
            "color": "#E9967A",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "79ef9178-e58f-4940-ae3e-31e228b7f7d0"
          },
          "children": []
        }
      ]
    },
    {
      "data": {
        "text": "角的初步认识",
        "note": "认识角的基本特征：有一个顶点和两条边。学会区分直角、锐角和钝角，掌握用三角尺判断直角的方法。能够在生活中找到各种角，学会画角，培养几何直观和空间观念。",
        "nextSystemPrompt": "基于角的认识知识点，总结出角的概念、直角认识、锐角钝角、角的画法、角的比较等子知识点",
        "color": "#4B0082",
        "expand": true,
        "richText": false,
        "isActive": false,
        "uid": "b5a2408c-7a25-4eb0-aac0-a64c95130d33",
        "dir": "right"
      },
      "children": [
        {
          "data": {
            "text": "角的基本概念",
            "note": "认识角由一个顶点和两条边组成，理解角的形成过程。能够从生活中的物体表面找到角，如课桌角、书本角等。掌握角的基本要素和表示方法。",
            "nextSystemPrompt": "",
            "color": "#6A5ACD",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "6f6e9322-5df7-4d9d-86d1-8d7561ed9d13"
          },
          "children": []
        },
        {
          "data": {
            "text": "直角的认识",
            "note": "认识直角的特征，知道三角尺上有直角。掌握用三角尺上的直角来判断其他角是否为直角的方法。能够在方格纸上画出直角，理解直角在生活中的广泛应用。",
            "nextSystemPrompt": "",
            "color": "#7B68EE",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "2d292825-3b87-498e-b959-52dc6ecc60fb"
          },
          "children": []
        },
        {
          "data": {
            "text": "锐角和钝角",
            "note": "理解锐角比直角小、钝角比直角大的关系。能够用三角尺上的直角作为标准来比较和判断锐角、钝角。掌握三种角的区分方法和特征。",
            "nextSystemPrompt": "",
            "color": "#9370DB",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "d523fd5e-181f-4faf-b888-cc1cb4ce10e3"
          },
          "children": []
        },
        {
          "data": {
            "text": "角的画法",
            "note": "学会画角的基本步骤：先画一个点作顶点，再从这个点向不同方向画两条射线。能够用三角尺画直角，掌握画角的正确方法和工具使用。",
            "nextSystemPrompt": "",
            "color": "#8A2BE2",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "672194e3-bad3-4b4c-aa15-850b5706ea7e"
          },
          "children": []
        },
        {
          "data": {
            "text": "角的大小比较",
            "note": "理解角的大小与边的长短无关，与开口大小有关。能够通过重叠比较等方法判断角的大小关系。掌握用三角尺比较角的大小的方法。",
            "nextSystemPrompt": "",
            "color": "#9932CC",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "451b90e8-7bff-4e0d-8646-e58a64fa4390"
          },
          "children": []
        }
      ]
    },
    {
      "data": {
        "text": "表内乘法(一)",
        "note": "从相同加数的加法引入乘法概念，学习2-6的乘法口诀。掌握乘法的意义和读写方法，理解乘数、乘号、积的含义。能够熟练背诵口诀，运用口诀进行计算，解决简单的实际问题。",
        "nextSystemPrompt": "基于表内乘法知识点，总结出乘法初步认识、乘法口诀、乘法计算、乘加乘减、实际应用等子知识点",
        "color": "#8B4513",
        "expand": true,
        "richText": false,
        "isActive": false,
        "uid": "cb54dfe8-1034-4bca-9351-fe8ba1e78d29",
        "dir": "left"
      },
      "children": [
        {
          "data": {
            "text": "乘法的初步认识",
            "note": "从几个相同加数的加法算式引入乘法概念，理解乘法是相同加数加法的简便写法。掌握乘法算式的读法和写法，认识乘号、乘数、积等术语。",
            "nextSystemPrompt": "",
            "color": "#A0522D",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "3844b6a9-32ef-4617-b9f4-3f9aa96c8bc9"
          },
          "children": []
        },
        {
          "data": {
            "text": "2-6的乘法口诀",
            "note": "系统学习2、3、4、5、6的乘法口诀，理解口诀的编排规律。能够熟练背诵口诀，掌握用口诀求积的方法。理解一句口诀可以计算两个乘法算式。",
            "nextSystemPrompt": "",
            "color": "#D2691E",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "e86cc022-232d-4eae-b9a2-7ad2f6ac93ee"
          },
          "children": []
        },
        {
          "data": {
            "text": "乘法计算",
            "note": "能够根据乘法口诀快速准确地计算表内乘法。掌握由积想乘数的方法，提高计算的灵活性。能够进行乘法算式与口诀之间的相互转换。",
            "nextSystemPrompt": "",
            "color": "#CD853F",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "c58d2eec-c01c-4068-8dcf-2c58af4e8b73"
          },
          "children": []
        },
        {
          "data": {
            "text": "乘加和乘减",
            "note": "学习乘加、乘减混合运算，掌握先算乘法再算加减的运算顺序。能够解决稍复杂的实际问题，如求几组物品加上（或减去）零散物品的总数。",
            "nextSystemPrompt": "",
            "color": "#DEB887",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "d63798d6-66c5-485b-817a-c6cbdbcd7118"
          },
          "children": []
        },
        {
          "data": {
            "text": "实际问题应用",
            "note": "能够从实际情景中抽象出乘法问题，正确列出乘法算式。掌握解决求几个几是多少的问题方法，培养用数学解决实际问题的能力和意识。",
            "nextSystemPrompt": "",
            "color": "#F4A460",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "8c223cad-c429-4dc7-aad9-6152dedfa672"
          },
          "children": []
        }
      ]
    },
    {
      "data": {
        "text": "观察物体(一)",
        "note": "通过观察简单的立体图形，初步体验从不同角度观察物体看到的形状可能不同。培养学生的空间观念和几何直观，学会用数学的眼光观察现实世界，发展空间想象能力。",
        "nextSystemPrompt": "基于观察物体知识点，总结出不同角度观察、立体图形认识、空间位置关系、观察方法、空间想象等子知识点",
        "color": "#006400",
        "expand": true,
        "richText": false,
        "isActive": false,
        "uid": "dc945494-4b85-4584-9c93-084956767256",
        "dir": "left"
      },
      "children": [
        {
          "data": {
            "text": "不同角度观察",
            "note": "体验从正面、侧面、上面等不同角度观察同一物体，看到的形状会不同。理解观察角度与所见图形的关系，培养多角度思考问题的意识。",
            "nextSystemPrompt": "",
            "color": "#228B22",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "45f11a62-1b3d-4e38-a6c5-1d9ab9ce32f7"
          },
          "children": []
        },
        {
          "data": {
            "text": "立体图形的认识",
            "note": "初步认识正方体、长方体等简单立体图形的特征。通过实物操作，感受立体图形的空间特性，为进一步学习几何知识打下基础。",
            "nextSystemPrompt": "",
            "color": "#32CD32",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "1df0a4a2-e70c-433d-bcf3-aaa356c68cb2"
          },
          "children": []
        },
        {
          "data": {
            "text": "空间位置关系",
            "note": "理解前后、左右、上下等空间位置关系。能够根据观察位置判断所看到的图形形状，发展空间定向能力和空间想象能力。",
            "nextSystemPrompt": "",
            "color": "#3CB371",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "89e1520d-03cf-4de2-8948-be8b31c73588"
          },
          "children": []
        },
        {
          "data": {
            "text": "观察方法和技巧",
            "note": "掌握有序观察的方法，学会选择合适的观察角度。培养仔细观察、认真思考的学习习惯，提高观察能力和空间想象能力。",
            "nextSystemPrompt": "",
            "color": "#20B2AA",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "fc7a07f2-6057-49bd-891f-252d1b7c5aed"
          },
          "children": []
        },
        {
          "data": {
            "text": "空间想象能力",
            "note": "通过观察活动发展空间想象能力，能够根据一个角度的观察结果想象其他角度的可能形状。培养几何直观和空间观念。",
            "nextSystemPrompt": "",
            "color": "#4682B4",
            "expand": true,
            "richText": false,
            "isActive": false,
            "uid": "4385953c-c650-4a0e-877e-74bcdca1b00b"
          },
          "children": []
        }
      ]
    }
  ],
  "smmVersion": "0.14.0-fix.1"
};
// {{REPLACE:cardData END}}
        // {{REPLACE:cardData END}}
        
        // 多风格背景颜色库（科技、教育、儿童、可爱）
        const colors = [
            // --- 科技感 (Tech/Sci-Fi) ---
            // 冷色调、青色、电光蓝、金属灰
            '#e0f7fa', '#b2ebf2', '#80deea', '#84ffff', '#18ffff', // Cyan / Electric Blue
            '#e1f5fe', '#b3e5fc', '#81d4fa', '#80d8ff', '#40c4ff', // Light Blue / Sky
            '#eceff1', '#cfd8dc', '#b0bec5', '#90a4ae', '#f5f5f5', // Blue Grey / Metallic
            '#a7ffeb', '#64ffda', '#1de9b6', '#d7effe', '#e2efff', // Mint / Subtle Tech

            // --- 教育风格 (Education/Academic) ---
            // 稳重、护眼、纸张色、柔和的高亮色
            '#fff8e1', '#ffecb3', '#ffe082', '#ffd54f', '#fff3e0', // Paper / Warm Light
            '#e8f5e9', '#c8e6c9', '#a5d6a7', '#81c784', '#f1f8e9', // Calm Green / Growth
            '#e3f2fd', '#bbdefb', '#90caf9', '#64b5f6', '#e8eaf6', // Trustworthy Blue
            '#f3e5f5', '#e1bee7', '#ce93d8', '#fff9c4', '#fff59d', // Soft Purple / Highlight Yellow

            // --- 儿童风格 (Kids/Playful) ---
            // 明亮、高饱和度、原色系变体、活泼
            '#ff8a80', '#ff5252', '#ff9e80', '#ff6e40', '#ffd180', // Playful Red / Orange
            '#ffff8d', '#ffff00', '#f4ff81', '#eeff41', '#ccff90', // Bright Yellow / Lime
            '#82b1ff', '#448aff', '#80d8ff', '#00b0ff', '#84ffff', // Vivid Blue / Cyan
            '#b9f6ca', '#69f0ae', '#00e676', '#a7ffeb', '#18ffff', // Bright Green

            // --- 可爱风格 (Cute/Kawaii/Pastel) ---
            // 马卡龙色、粉嫩、奶油色、梦幻
            '#ffcdd2', '#ef9a9a', '#f8bbd0', '#f48fb1', '#fce4ec', // Soft Pink / Rose
            '#e1bee7', '#d1c4e9', '#c5cae9', '#ede7f6', '#d7ccc8', // Lavender / Soft Cocoa
            '#b2dfdb', '#80cbc4', '#b2ebf2', '#e0f7fa', '#c8e6c9', // Mint / Baby Blue
            '#fff9c4', '#fff59d', '#ffe082', '#ffebee', '#f3e5f5'  // Cream / Pudding / Dreamy
        ];
        /**
         * 创建卡片 DOM 元素
         */
        function createCardElement(nodeData) {
            const card = document.createElement('div');
            card.className = 'card';
            
            // 根据内容生成确定性的颜色索引，确保每次刷新颜色一致
            let hash = 0;
            const str = (nodeData.text || '') + (nodeData.uid || '');
            for (let i = 0; i < str.length; i++) {
                hash = str.charCodeAt(i) + ((hash << 5) - hash);
            }
            const index = Math.abs(hash) % colors.length;
            const fixedColor = colors[index];
            card.style.backgroundColor = fixedColor;
            
            // 统一文字和边框样式
            card.style.color = '#333333';
            card.style.border = '1px solid rgba(0,0,0,0.05)';

            // 标题 (text)
            const textEl = document.createElement('div');
            textEl.className = 'card-text';
            textEl.textContent = nodeData.text || '无标题节点';

            // 备注 (note)
            const noteEl = document.createElement('div');
            noteEl.className = 'card-note';
            noteEl.textContent = nodeData.note || '';

            card.appendChild(textEl);
            card.appendChild(noteEl);

            return card;
        }

        /**
         * 递归渲染节点
         */
        function renderNodes(nodes, container) {
            if (!nodes || nodes.length === 0) return;

            nodes.forEach(node => {
                const nodeWrapper = document.createElement('div');
                nodeWrapper.className = 'node-wrapper';

                // 1. 渲染当前节点卡片
                if (node.data) {
                    const card = createCardElement(node.data);
                    nodeWrapper.appendChild(card);
                }

                // 2. 递归渲染子节点
                if (node.children && node.children.length > 0) {
                    const childrenWrapper = document.createElement('div');
                    childrenWrapper.className = 'children-wrapper';
                    renderNodes(node.children, childrenWrapper);
                    nodeWrapper.appendChild(childrenWrapper);
                }

                container.appendChild(nodeWrapper);
            });
        }

        // 初始化
        const appContainer = document.getElementById('app');
        
        // 设置标题
        if (cardData.data && cardData.data.text) {
            document.getElementById('topic-title').textContent = cardData.data.text;
        }

        // 渲染根节点（将根节点作为数组传入以复用 renderNodes 逻辑）
        // 如果根节点是对象，先把它包装成数组
        const rootNodes = cardData.children ? cardData.children : [cardData];
        renderNodes(rootNodes, appContainer);
    </script>
</body>
</html>